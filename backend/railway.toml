[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"
# El contexto debe ser la raíz del repo (../),
# configúralo en Railway Dashboard → Build → Docker Build Context = /

[deploy]
startCommand = "bun dist/app.js"
healthcheckPath = "/"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3

[[deploy.envVars]]
# Railway inyecta PORT automáticamente — el backend lo lee via process.env.PORT
# Configura las siguientes en Railway Dashboard → Variables:
#
# DATABASE_URL        = (Railway PostgreSQL → Connect → Postgres URL)
# CORS_ORIGIN         = https://tu-frontend.up.railway.app
# FRONTEND_URL        = https://tu-frontend.up.railway.app
# WP_PUBLIC_KEY       = pub_test_...
# WP_PRIVATE_KEY      = prv_test_...
# WP_EVENTS           = ...
# WP_INTEGRITY        = ...
# EMAIL_USER          = tu@gmail.com
# EMAIL_PASSWORD      = app-password-gmail
# EMAIL_FROM          = noreply@neosale.com
# EMAIL_HOST          = smtp.gmail.com
# EMAIL_PORT          = 587
# ENVIOCLICK_API_KEY  = ...
# NODE_ENV            = production
