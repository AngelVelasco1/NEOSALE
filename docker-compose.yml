services:
  redis:
    # Imagen de Redis (versión 7, con Alpine Linux)
    image: redis:7-alpine
    container_name: redis-neosale
    # Puerto: 6379 es el puerto estándar de Redis
    # formato: "puerto_en_tu_pc:puerto_en_contenedor"
    ports:
      - "6379:6379"
    # Volúmenes: donde Redis guarda los datos
    volumes:
      # Los datos de Redis se guardan aquí
      - redis-data:/data
      # Nuestro archivo de configuración
      - ./redis.conf:/usr/local/etc/redis/redis.conf
    # Comando que ejecuta Redis al iniciar
    command: redis-server /usr/local/etc/redis/redis.conf
    # Reiniciar automáticamente si se cae
    restart: unless-stopped
    # Verificar que Redis esté funcionando
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 10s
      timeout: 3s
      retries: 5
volumes:
  redis-data:
    driver: local
